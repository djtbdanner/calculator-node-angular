<div class="basic">
  <h2 class="no-print text-center ">Loan Calculator</h2>
  <form #form="ngForm">

    <table class="table no-print">

      <tbody>
        <tr>
          <td>
            <label> Loan Amount</label>
            <input type="text" class="form-control" placeholder="Loan Amount" name="loanAmount" [ngModel]="form.loanAmount" required
              minlength="2" maxlength="8" #loanAmount="ngModel" ngModel pattern="[0-9]{1,8}" (keyup)="changeLoanAmount(loanAmount.value)">
            <small [hidden]="loanAmount.valid || (loanAmount.pristine)" class="text-danger"> 
                LoanAmount is required and must be numeric.
            </small>
          </td>
          <td>
            <label> Interest Rate %</label>
            <input type="text" class="form-control" placeholder="Interest Rate %" name="interestRate" [ngModel]="form.interestRate" required
              minlength="1" maxlength="3" #interestRate="ngModel" ngModel pattern="[0-9.]{1,4}" (keyup)="changeLoanInterest(interestRate.value)">
            <small [hidden]="interestRate.valid || (interestRate.pristine)" class="text-danger"> 
                Interest Rate is required and must be numeric.
            </small>
          </td>
        </tr>
        <tr>
          <td>
            <label>Number Of Payments</label>
            <input type="text" class="form-control" placeholder="Number Of Payments" name="numberOfPayments" [ngModel]="form.numberOfPayments"
              required minlength="1" maxlength="3" #numberOfPayments="ngModel" ngModel pattern="[0-9]{1,3}" (keyup)="changeLoanPayment(numberOfPayments.value)">
            <small [hidden]="numberOfPayments.valid || (numberOfPayments.pristine)" class="text-danger"> 
                Number of payments is required and must be numeric.
            </small>
          </td>
          <td>
            <label>Start Date</label>
            <input type="date" class="form-control" #startDate name="startDate" (change)="changeStartDate(startDate.value)" />
          </td>

        </tr>
        <tr>
          <td colspan="2">
            <label>Loan item</label>
            <input class="form-control" [(ngModel)]="loanItem" name="loanItem"  placeholder="Optionally add item or items loan is for." >
          </td>
        </tr>
      </tbody>
    </table>
    <div *ngIf="paymentData">
      <h4 *ngIf="loanItem" class="text-info text-center"> Payment Amortization scheule for {{loanItem}}.</h4>
      <h4 class="text-info text-center">
        Monthly Payment {{paymentData.payment.amount | currency:'USD':true:'1.2-2'}}, Total Interest {{paymentData.payment.interest
        | currency:'USD':true:'1.2-2'}}
      </h4>

      <table class="table table-bordered table-striped">
        <thead class="thead-inverse">
          <tr>
            <th class="hidden-xs">#</th>
            <th class="visible-print-block">#</th>
            <th>Payment</th>
            <th>Principal</th>
            <th>Interest</th>
            <th class="hidden-xs">Total Int.</th>
            <th class="visible-print-block">Total Interest</th>
            <th>Balance</th>
            <th>Due Date</th>
          </tr>
        </thead>

        <tbody *ngFor="let payment of payments">
          <tr>
            <td class="hidden-xs">{{ payment.paymentNumber }}</td>
            <td class="visible-print-block">{{ payment.paymentNumber }}</td>
            <td>{{ payment.amount | currency:'USD':true:'1.2-2'}}</td>
            <td>{{ payment.principal | currency:'USD':true:'1.2-2'}}</td>
            <td>{{ payment.interest | currency:'USD':true:'1.2-2'}}</td>
            <td class="hidden-xs">{{ payment.totalInterest | currency:'USD':true:'1.2-2'}}</td>
            <td class="visible-print-block">{{ payment.totalInterest | currency:'USD':true:'1.2-2'}}</td>
            <td>{{ payment.balance | currency:'USD':true:'1.2-2'}}</td>
            <td>{{ payment.dueDate | date: 'MM/dd/yyyy' }}</td>
          </tr>
          <tr>
        </tbody>
      </table>
    </div>
  </form>
</div>